<!DOCTYPE html>

<head>
<meta charset="utf-8">
<title>Wiadomości - wprowadzenie</title>

<link rel="stylesheet" type="text/css" href="style.css" />

</head>

<script>
	//Komunikacja pomiędzy Window objects:
	//Wysyłanie wiadomości w ramach jednej lokalnej domeny => Działa tylko na serwerze
	window.onload = function(){
		var iframe = document.getElementById('iframe').contentWindow;
		var form = document.getElementById('form');
		
		form.onsubmit = function(event){
			//Pobieranie treści wiadomości z inputa
			var wiad_tresc = document.getElementById('wiadomosc').value;
			//Metoda postMessage przekazuje wiadomość w argumentach: treść, adres
			iframe.postMessage(wiad_tresc,"http://127.0.0.1");
			event.preventDefault();
		}
	}

</script>

<body>

    <h1>Wiadomości</h1>
    
	<form id="form" action="#">
    	<p><label for="wiadomosc">Wiadomość</label><input name="wiadomosc" type="text" id="wiadomosc" /></p>
        <p><input type="submit" value="Wyślij" id="submit"/></p>
    </form>
    
    <iframe id="iframe" src="iframe.html">
    </iframe>

</body>
</html>
